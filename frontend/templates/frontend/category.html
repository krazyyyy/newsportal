{% extends 'frontend/base.html' %}

{% load static %}

{% block title %} {{ main_item }} {% endblock %}

{% block static %}


<link rel="stylesheet" href="{% static 'frontend/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/fontawesome.min.css">
<link rel="stylesheet" type="text/css" href="{% static 'frontend/assets_two/css/bootstrap.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'frontend/assets_two/css/style.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'frontend/assets_two/vendor/owl-slider.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'frontend/assets_two/vendor/custombox.min.css' %}"/>

<link rel="shortcut icon" href="{% static 'frontend/assets_two/images/favicon.png' %}" />

{% endblock %}


{% block body %}
<style>
    
.banner-container {
    height: 3000px;
}

#sidead-banner {
    margin : 10px 0;
    position: sticky;
    top: 60px;
}

@media (max-width: 900px) {
.banner-container {
    height: unset;
}
}
</style>

<div class="wrappage">
    {% include 'frontend/header.html' %}
    <div class="row" style="padding-top: 20px;    display: flex;
    justify-content: center;">
    {% if options.top_banner %}
        {{ options.top_banner | safe  }}
    {% else %}
    <img src="{% static 'frontend/assets_two/images/top banner.jpg' %}" alt="">
    {% endif %}
    </div>

    <div class="row" style="    display: flex;
    justify-content: center;">
    <div class="home2-head box slide-owl-mobile nav-ver5">

    </div>
    </div>

    
    <div class="banner" style="margin: 4px 85px;">
        {% if options.bill_board %}
                {{ options.bill_board | safe }}
        {% else %}
        <img src="{% static 'frontend/assets_two/images/billboard.jpg' %}" alt="">
        {% endif %}
    </div>

    <div class="container">
    <div class="row">
        <div class="col-md-8">
        <div class="technnology box space-30">
               
    </div>
    <div class="mid_button">
        <button id="more_btn" onclick="getByCategories()">Učitaj više</button>
    </div>
</div>
<div class="col-md-4">
    <aside class="widget">
        <div class="banner">
            {% if options.category_sideAD %}
            {{ options.category_sideAD | safe }}
            {% else %}
            <img class="img-responsive" src="{% static 'frontend/assets_two/images/widget-banner.jpg' %}" alt="banner">
            {% endif %}
        </div>
        <div class="banner-container">
            <div class="banner" id="sidead-banner">
                {% if options.sidebarAD %}
                    {{ options.sidebarAD | safe }}
                {% else %}
                    <img class="img-responsive" src="{% static 'frontend/assets_two/images/300x600.png' %}" alt="sidebar-banner">
                {% endif %}
            </div>
        </div>
    </aside>
</div>
</div>
</div>

    {% include 'frontend/footer.html' %}

</div>

<script>
    function updateDate(elem) {
       elem = elem.replace("+0100", "")
       elem = elem.replace("+0200", "") 
       elem = elem.replace("+0000", "") 
       elem = elem.replace("000Z", "") 
       elem = elem.replace("Mon", "") 
       elem = elem.replace("Tue", "") 
       elem = elem.replace("Wed", "") 
       elem = elem.replace("Thu", "") 
       elem = elem.replace("Fri", "") 
       elem = elem.replace("Sun", "") 
       elem = elem.replace("Sat", "") 
       elem = elem.replace("Jan", "1") 
       elem = elem.replace("Feb", "2") 
       elem = elem.replace("Apr", "3") 
       elem = elem.replace("Mar", "4") 
       elem = elem.replace("May", "5") 
       elem = elem.replace("Jun", "6") 
       elem = elem.replace("Jul", "7") 
       elem = elem.replace("Aug", "8") 
       elem = elem.replace("Sep", "9") 
       elem = elem.replace("Oct", "10") 
       elem = elem.replace("Nov", "11") 
       elem = elem.replace("Dec", "12") 
       elem = elem.replaceAll(" ", "/") 
       elem = elem.replace("/01:", " 01:") 
       elem = elem.replace("/02:", " 02:") 
       elem = elem.replace("/03:", " 03:") 
       elem = elem.replace("/04:", " 04:") 
       elem = elem.replace("/05:", " 05:") 
       elem = elem.replace("/06:", " 06:") 
       elem = elem.replace("/07:", " 07:") 
       elem = elem.replace("/08:", " 08:") 
       elem = elem.replace("/09:", " 09:") 
       elem = elem.replace("/10:", " 10:") 
       elem = elem.replace("/11:", " 11:") 
       elem = elem.replace("/12:", " 12:") 
       elem = elem.replace("/13:", " 13:") 
       elem = elem.replace("/14:", " 14:") 
       elem = elem.replace("/15:", " 15:") 
       elem = elem.replace("/16:", " 16:") 
       elem = elem.replace("/17:", " 17:") 
       elem = elem.replace("/18:", " 18:") 
       elem = elem.replace("/19:", " 19:") 
       elem = elem.replace("/20:", " 20:") 
       elem = elem.replace("/21:", " 21:") 
       elem = elem.replace("/22:", " 22:") 
       elem = elem.replace("/23:", " 23:") 
       elem = elem.replace("/24:", " 24:") 
       elem = elem.slice(3, -1) 
       
       return elem
    }


    page_no = 1
    category = '{{ main_item }}'
    function getByCategories() {
    fetch(`/rss/newsCategory/${category}`, {
        method : "POST",
        body : JSON.stringify({
            "page_no" : page_no
        })
    })
        .then(response => response.json())
        .then(data => {
            
            if (!data['next']) {
                document.querySelector("#more_btn").style.display = 'none';
            }
            
            info = data['feed']
            for ( var i = 0; i < info.length; i ++) { 
              
      
            if (page_no == 1 && i < 3) {
                
                home_head = document.querySelector(".home2-head")
                home_head.innerHTML += `
                <div class="col-md-4 col-sm-4">
            <div class="post-item ver1 cat-3 overlay">
                <a rel="nofollow" class="images" href="${info[i]['link']}" title="${info[i]['title']}" alt="${info[i]['title']}"><img id="img-head-news" class='img-responsive' src="${info[i]['img']}" alt="${info[i]['title']}"></a>
                
            </div>

                <a rel="nofollow" class="wrap dsg" href="${info[i]['link']}"><h4>${info[i]['title']}</h4></a>
                <small class="wrap" class="date"><a id="no-style-link" href="/source/${info[i]['source']}"> ${info[i]['source']} </a> | <a id="no-style-link" href="/category/${info[i]['category']}"> ${info[i]['category']} </a> |  ${updateDate(info[i]['pub_date'])}</small>
            </div>
<!-- End item -->
        </div>
       
            ` 
            }
            else { 
                page_no += 1
                home_head = document.querySelector(".technnology")
              
                home_head.innerHTML += `
                <div class="post-item ver2 hg200">
                        <a class="images" href="${info[i]['link']}" title="${info[i]['title']}" alt="${info[i]['title']}"><img class='img-responsive' src="${info[i]['img']}" alt="${info[i]['title']}"></a>
                        <div class="text">
                            <h2><a href="${info[i]['link']}" title="title">${info[i]['title']}</a></h2>
                            <div class="tag">
                                <p class="date"> <a id="no-style-link" href="/source/${info[i]['source']}"> ${info[i]['source']} </a> | <a id="no-style-link" href="/category/${info[i]['category']}"> ${info[i]['category']} </a> |  ${updateDate(info[i]['pub_date'])}</p>
                                
                            </div>
                            <a class="read-more" href="${info[i]['link']}" title="pročitaj više">pročitaj više</a>
                        </div>
                    </div>
            
                `
                }
                }
                page_no += 1
        })
    }
    getByCategories()
</script>

<script type="text/javascript" src="{% static 'frontend/assets_two/js/jquery-3.1.1.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/owl.carousel.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/jquery.themepunch.revolution.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/jquery.themepunch.plugins.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/engo-plugins.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/custombox.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/legacy.min.js' %}"></script>
<script type="text/javascript" src="{% static 'frontend/assets_two/js/store.js' %}"></script>

{% endblock %}